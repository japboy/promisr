(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Promisr=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(global){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _underscore=require("underscore");var _underscore2=_interopRequireDefault(_underscore);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Promisr=function(){function Promisr(Subject){_classCallCheck(this,Promisr);if(Subject===global.Promise){this.Promise=Subject}else if(_underscore2.default.isFunction(Subject.defer)){this.Q=Subject}else if(_underscore2.default.isObject(Subject.Deferred)){this.$=Subject}else{throw new global.Error("No Promise modules found. ES2015 Promise, Q Deferred, or jQuery Deferred required.")}this.promisify=function(Promise,Q,$){if(Promise){return function(func){var partial=function partial(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}var promise=new Promise(function(resolve,reject){func.apply(undefined,_underscore2.default.union([resolve,reject],args))});return promise};return partial}}else if(Q){return function(func){var partial=function partial(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}var dfr=Q.defer(),promiseArgs=[dfr.resolve,dfr.reject];var timeoutId=global.setTimeout(function(){global.clearTimeout(timeoutId);func.apply(undefined,_underscore2.default.union(promiseArgs,args))},1);return dfr.promise};return partial}}else if($){return function(func){var partial=function partial(){for(var _len3=arguments.length,args=Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3]}var dfr=new $.Deferred,promiseArgs=[dfr.resolve,dfr.reject];var timeoutId=global.setTimeout(function(){global.clearTimeout(timeoutId);func.apply(undefined,_underscore2.default.union(promiseArgs,args))},1);return dfr.promise()};return partial}}}(this.Promise,this.Q,this.$);this.passed=this.promisify(function(resolve,reject,val){resolve(val)});this.promisified=this.promisify(function(resolve,reject,val){if(val instanceof global.Error)return reject(val);resolve(val)});this.sleep=this.promisify(function(resolve,reject){var millisec=arguments.length<=2||arguments[2]===undefined?80:arguments[2];var id=global.setTimeout(function(){global.clearTimeout(id);resolve(millisec)},millisec-1)})}_createClass(Promisr,[{key:"lazify",value:function lazify(func){var _this=this;var partial=function partial(){for(var _len4=arguments.length,args=Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4]}var done=_this.promisify(function(resolve,reject){try{var val=func.apply(undefined,args);resolve(val)}catch(err){reject(err)}});return done()};return partial}},{key:"attemptCounted",value:function attemptCounted(done,times,interval){var _this2=this;var success=function success(dat){return dat};var fail=function fail(err){if(1>=times)return err;return _this2.sleep(interval).then(function(){return _this2.attemptCounted(done,times-1,interval)})};return done().then(success,fail)}},{key:"attemptTicked",value:function attemptTicked(done,duration){var _this3=this;var start=arguments.length<=2||arguments[2]===undefined?+new global.Date:arguments[2];var success=function success(dat){return dat};var fail=function fail(err){var stop=+new global.Date;if(duration>stop-start)return _this3.attemptTicked(done,duration,start);return err};return done().then(success,fail)}},{key:"all",value:function all(){for(var _len5=arguments.length,args=Array(_len5),_key5=0;_key5<_len5;_key5++){args[_key5]=arguments[_key5]}var promises=_underscore2.default.isArray(args[0])?args[0]:args;if(this.Promise){return this.Promise.all.apply(undefined,promises)}else if(this.Q){return this.Q.all(promises)}else if(this.$){return this.$.when.apply(undefined,promises)}}},{key:"map",value:function map(items,promisified){return all(_underscore2.default.map(items,this.promisified))}}]);return Promisr}();module.exports=Promisr}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{underscore:undefined}]},{},[1])(1)});